/* ============================================================
   iPad / Tablets (900–1199.98px) — Layout estable
   - Board capado a máx 720px y cuadrado
   - Hijo grid absoluto (10×10 ya está fijado por JS/CSS previos)
   - Toolbar 2 columnas
   ============================================================ */

@media (min-width: 900px) and (max-width: 1199.98px) {

  /* Contenedor principal en columna, sin gaps implícitos */
  #board-row, .board-row, .editor-layout {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: flex-start !important;
    gap: 0 !important;
    width: min(95vw, 1400px) !important;
    margin: 0 auto !important;
    padding: 0 !important;
  }

  /* === Board: cuadrado, capado a 720px === */
  #board {
    position: relative !important;
    overflow: hidden !important;
    aspect-ratio: 1 / 1 !important;
    width: min(88vmin, 720px) !important;   /* <-- CAP aquí */
    max-width: 100% !important;
    height: auto !important;
    line-height: 0 !important;
    font-size: 0 !important;
  }

  /* Hijo principal del board (tu DIV grid) ocupa todo pero no aporta alto extra */
  #board > div {
    position: absolute !important;
    inset: 0 !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    /* display: grid (se respeta, no lo cambiamos) */
    grid-template-columns: repeat(10, minmax(0, 1fr)) !important;
    grid-template-rows: repeat(10, minmax(0, 1fr)) !important;
    gap: 0 !important;
    align-content: stretch !important;
    justify-content: stretch !important;
    place-items: stretch !important;
  }

  /* Toolbar en 2 columnas */
  #right-panel, .right-panel, #tools, #toolbar {
    width: 100% !important;
    display: grid !important;
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    column-gap: 12px !important;
    row-gap: 8px !important;
    margin: 0 !important;
    box-sizing: border-box !important;
    contain: layout paint !important; /* evita colapsos de margen */
  }

  #right-panel :is(button, .btn, a.btn, .control),
  #tools :is(button, .btn, a.btn, .control),
  #toolbar :is(button, .btn, a.btn, .control) {
    width: 100% !important;
    min-height: 50px !important;
  }
  /* Cero hueco de contacto board/toolbar */
  #board { margin-bottom: 0 !important; padding-bottom: 0 !important; }
  #right-panel, .right-panel, #tools, #toolbar { margin-top: 0 !important; }
}
/* ==== FIX: eliminar hueco interno del #board (baseline/inline) ==== */
@media (min-width: 900px) and (max-width: 1199.98px) {

  /* El board no tiene línea base ni interlínea */
  #board {
    line-height: 0 !important;
    font-size: 0 !important;
  }

  /* Cualquier imagen/svg dentro del board NO es inline */
  #board > img,
  #board > svg,
  #board > picture,
  #board > [role="img"],
  #board > .board-bg {
    display: block !important;           /* quita baseline gap */
    position: absolute !important;       /* no aporta alto */
    inset: 0 !important;                 /* top/right/bottom/left = 0 */
    width: 100% !important;
    height: 100% !important;
    object-fit: contain !important;      /* o 'cover' si prefieres llenar */
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Por si existe un canvas no absoluto aún */
  #board > canvas {
    display: block !important;
  }
}
/* ==== Aplana el DIV interno del board SIN cambiar su display (sigue en grid) ==== */
@media (min-width: 900px) and (max-width: 1199.98px) {
  #board {
    position: relative !important;
    overflow: hidden !important;
    line-height: 0 !important;
    font-size: 0 !important;
    aspect-ratio: 1 / 1 !important;
  }

  /* Mantén su GRID: solo posición absoluta y tamaño completo */
  #board > div {
    position: absolute !important;
    inset: 0 !important;         /* top/right/bottom/left: 0 */
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    /* NO tocar display: queda como esté (grid) */
  }

  /* Canvas/imagenes/svg solo se aseguran en bloque; no tocamos su layout */
  #board > canvas,
  #board > img,
  #board > svg,
  #board > picture,
  #board > [role="img"] {
    display: block !important;
    margin: 0 !important;
  }
}
/* ==== Recorte subpíxel del lienzo interno del board (evita 11x11/13x13) ==== */
@media (min-width: 900px) and (max-width: 1199.98px) {
  #board { 
    position: relative !important; 
    overflow: hidden !important;
    --trim: 1px;               /* puedes subir a 1.5px si aún ves una línea */
  }

  /* El primer hijo (tu DIV grid) ocupa casi todo, con un recorte mínimo */
  #board > div {
    position: absolute !important;
    top: var(--trim) !important;
    left: var(--trim) !important;
    width: calc(100% - 2 * var(--trim)) !important;
    height: calc(100% - 2 * var(--trim)) !important;
    margin: 0 !important;
    padding: 0 !important;
    /* mantenemos su display GRID original: NO lo toques */
  }

  /* Por si el tablero usa imagen/gradiente de fondo: evitar “repetición sobrante” */
  #board > div {
    background-position: top left !important;
    background-origin: content-box !important;
    background-clip: content-box !important;
    /* Si tu fondo es imagen, esto ayuda a cuadrar exactamente 10×10 */
    /* background-size: calc(100%/10) calc(100%/10) !important;  ← úsalo si tu tablero se pinta con image tiles */
  }
}
@media (min-width: 900px) and (max-width: 1199.98px) {
  #board {
    position: relative !important;
    overflow: hidden !important;
    aspect-ratio: 1 / 1 !important;
    line-height: 0 !important;
    font-size: 0 !important;
  }

  /* Hijo principal del board: absoluto al 100% */
  #board > div {
    position: absolute !important;
    inset: 0 !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important; padding: 0 !important;
    /* display: (se respeta el que ya tenga, ej. grid) */
  }
}

/* ===========================
   FIX 10×10 estricto en iPad
   =========================== */
@media (min-width: 900px) and (max-width: 1199.98px) {
  #board { position: relative !important; overflow: hidden !important; }

  /* Hijo principal: grid 10×10, sin gap, sin bordes/padding extra */
  #board > div {
    position: absolute !important;
    inset: 0 !important;
    width: 100% !important;
    height: 100% !important;
    box-sizing: border-box !important;
    margin: 0 !important;
    padding: 0 !important;
    border: 0 !important;

    display: grid !important;
    grid-template-columns: repeat(10, minmax(0, 1fr)) !important;
    grid-template-rows: repeat(10, minmax(0, 1fr)) !important;
    gap: 0 !important;

    /* que el grid rellene sin dejar bandas */
    align-content: stretch !important;
    justify-content: stretch !important;
    place-items: stretch !important;

    /* si ese DIV usa background de tablero, evita “sangrías” por redondeo */
    background-origin: content-box !important;
    background-clip: content-box !important;
    background-position: top left !important;
  }
}

/* ============================================================
   iPad Pro (900–1199.98px) — Controles superiores en dos columnas
   ============================================================ */
@media (min-width: 900px) and (max-width: 1199.98px) {
  .top-controls-grid {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    column-gap: 12px !important;
    row-gap: 8px !important;
    width: 100% !important;
    margin: 0 0 12px 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
  }
  .top-controls-grid :is(button, .btn, a.btn, input[type="button"], input[type="submit"]) {
    width: 100% !important;
    min-height: 44px !important;
  }
}
/* iPad: grid de 2 columnas para los controles superiores */
@media (min-width: 900px) and (max-width: 1199.98px) {
  .top-controls-grid{
    display:grid !important;
    grid-template-columns:1fr 1fr !important;
    column-gap:12px !important;
    row-gap:8px !important;
    width:100% !important;
    margin:0 0 12px 0 !important;
    padding:0 !important;
    box-sizing:border-box !important;
  }
  .top-controls-grid :is(button,.btn,a.btn,input[type="button"],input[type="submit"]){
    width:100% !important;
    min-height:44px !important;
  }
}
