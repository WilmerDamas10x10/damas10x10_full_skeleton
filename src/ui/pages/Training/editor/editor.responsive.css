/* ============================================================
   EDITOR / MODO ENTRENAMIENTO — RESPONSIVE (LIMPIO, UNIFICADO)
   - Desktop (≥1200px): tablero centrado + toolbar a la derecha.
   - Tablet (900–1199.98px): tablero centrado + toolbar ABAJO.
   - Móvil (≤899.98px): una columna, todo apilado.
   ============================================================ */

/* ---------- Contenedor base ---------- */
.board-row,
.editor-layout {
  display: grid;
  grid-template-columns: 1fr;          /* móvil por defecto */
  grid-template-rows: auto auto auto;  /* turn | board | tools */
  gap: 16px;
  align-items: start;
  justify-items: center;
  width: min(95vw, 1400px);
  margin: 0 auto;
  box-sizing: border-box;
}

/* ---------- Tablero ---------- */
#board,
#board.board-fluid {
  width: min(90vmin, 700px);
  max-width: 100%;
  aspect-ratio: 1 / 1;
  height: auto;
  position: relative;
  outline: none;
}
#board .board-canvas-fluid { width: 100%; height: 100%; display: block; }

/* ---------- Toolbar / Sidebar ---------- */
.sidebar { align-self: start; }

.sidebar #tools,
#toolbar {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  grid-auto-rows: 50px;
  grid-auto-flow: row;
  gap: 12px;
  align-items: stretch;
  justify-items: stretch;
  width: 100%;
  box-sizing: border-box;
}

.sidebar #tools > *,
#toolbar > * {
  margin: 0;
  grid-column: auto / span 1;
  width: 100%;
  min-height: 50px;
  height: 50px;
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  gap: 8px;
  padding: 10px 14px;
  line-height: 1.1;
  box-sizing: border-box;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#btn-menu,
#btn-rotate { grid-column: 1 / -1; }      /* fila completa */
#btn-download-fen,
#btn-copy-fen { display: none !important; }/* ocultos por ahora */

/* ====== MÓVIL (≤899.98px) — 1 columna ====== */
@media (max-width: 899.98px){
  .board-row,
  .editor-layout {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
    gap: 12px;
  }

  .sidebar #tools,
  #toolbar {
    grid-template-columns: 1fr;
    grid-auto-rows: 48px;
    gap: 10px;
    max-width: 100%;
    margin: 0 auto;
  }

  html, body, #app, #root, [data-editor-root]{
    height: auto !important;
    min-height: 0 !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }
}

/* ====== TABLET (900–1199.98px) — tablero centrado + toolbar ABAJO ====== */
@media (min-width: 900px) and (max-width: 1199.98px){
  .board-row,
  .editor-layout {
    grid-template-columns: 1fr !important;           /* 1 columna */
    grid-template-rows: auto auto auto !important;   /* turn | board | tools */
    grid-template-areas:
      "turn"
      "board"
      "tools" !important;
    row-gap: 14px !important;
    column-gap: 0 !important;
    justify-items: center !important;
  }

  #turn-dock, #left-dock, .dock-turno { grid-area: turn !important; }

  #board {
    grid-area: board !important;
    justify-self: center !important;
    width: min(88vmin, 900px) !important;
    max-width: 100% !important;
    aspect-ratio: 1 / 1 !important;
    /* neutralizar posibles heredados que causan solape */
    position: relative !important;
    z-index: 1 !important;
    float: none !important;
    transform: none !important;
    clear: both !important;
    margin: 0 !important;
  }

  .sidebar,
  #right-panel,
  #tools,
  #toolbar {
    grid-area: tools !important;        /* DEBAJO del tablero */
    width: 100% !important;
    max-width: 900px !important;
    margin: 0 auto !important;
    position: static !important;
    top: auto !important;
    float: none !important;
    transform: none !important;
    z-index: 2 !important;
    clear: both !important;
  }

  .sidebar #tools,
  #toolbar {
    grid-template-columns: 1fr !important;  /* botones en una columna */
    grid-auto-rows: 50px !important;
    gap: 10px !important;
  }
}

/* ====== DESKTOP (≥1200px) — panel izq | tablero | toolbar ====== */
@media (min-width: 1200px){
  .board-row,
  .editor-layout {
    grid-template-columns: 260px minmax(560px, 1fr) 300px !important;
    grid-template-rows: auto auto;   /* turno arriba */
    column-gap: 20px;
    row-gap: 16px;
    justify-items: stretch;
  }

  .editor-layout #turn-dock,
  #left-dock,
  .dock-turno { grid-column: 1 / 2 !important; }

  .editor-layout #board {
    grid-column: 2 / 3 !important;
    max-width: 100% !important;
    justify-self: center !important; /* tablero centrado */
  }

  .editor-layout .sidebar,
  #right-panel,
  #toolbar {
    grid-column: 3 / 4 !important;
    position: static !important;
    top: auto !important;
    z-index: 2;
  }
}

/* ---------- Saneamientos ligeros ---------- */
#toolbar > [hidden],
.sidebar #tools > [hidden],
#toolbar > .hidden,
.sidebar #tools > .hidden,
#toolbar > [aria-hidden="true"],
.sidebar #tools > [aria-hidden="true"],
#toolbar > :empty,
.sidebar #tools > :empty { display: none !important; }

#toolbar,
.sidebar #tools { grid-auto-flow: row !important; }  /* no dense */

/* Scroll vertical seguro en tablet/móvil */
@media (max-width: 1199.98px){
  html, body { overflow-y: auto !important; overflow-x: hidden !important; }
}

/* Fondo (estético, sin impacto de grid) */
html, body, #app, #root { background: #EAF6FF !important; }
[data-editor-root], .editor-card, .layout-editor, .editor-layout {
  background: #EAF6FF !important;
  background-image: none !important;
  box-shadow: none !important;
}
