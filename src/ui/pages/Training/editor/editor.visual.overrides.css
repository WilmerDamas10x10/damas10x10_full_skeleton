/* ============================================================
   EDITOR (Entrenamiento) — OVERRIDES VISUALES FINALES
   Forzar: Toolbar SIEMPRE debajo del tablero + Botones unificados
   ============================================================ */

/* --- Contenedor principal --- */
.editor-layout,
.layout-editor {
  /* Grid vertical: turno | tablero | toolbar  */
  display: grid !important;
  grid-template-columns: minmax(280px, 1fr) !important;
  grid-template-rows: auto auto auto !important;
  grid-template-areas:
    "turn"
    "board"
    "tools" !important;
  justify-items: center !important;
  align-items: start !important;
  gap: 14px !important;
  width: min(96vw, 1260px) !important;
  margin: 0 auto !important;
  box-sizing: border-box !important;
}

/* Turno (dock) */
#turn-dock,
.dock-turno {
  grid-area: turn !important;
  width: 100% !important;
  max-width: 820px !important;
}

/* Tablero centrado y cuadrado fluido */
#board {
  grid-area: board !important;
  width: min(94vmin, 820px) !important;
  max-width: 100% !important;
  aspect-ratio: 1 / 1 !important;
  height: auto !important;
  position: relative !important;
  outline: none !important;
}

/* Toolbar / Sidebar SIEMPRE debajo del tablero */
.sidebar,
#tools,
#toolbar,
.toolbar-vertical {
  grid-area: tools !important;
  width: 100% !important;
  max-width: 820px !important;
  margin: 0 auto !important;
}

/* Anular “sticky” o posicionamientos heredados que causan solapes */
.editor-layout [style*="position: sticky"],
.editor-layout .sidebar [class*="sticky"] {
  position: static !important;
  top: auto !important;
}

/* --- Grid interno de la barra (1 columna, botones full width) --- */
.sidebar #tools,
#tools.toolbar-vertical,
#toolbar.toolbar-vertical,
.editor-layout .toolbar,
.editor-layout .toolbar-vertical {
  display: grid !important;
  grid-template-columns: 1fr !important;
  gap: 8px !important;
  align-items: stretch !important;
  width: 100% !important;
}

/* Normalización fuerte de botones (un único look & feel) */
:is(.toolbar, .toolbar-vertical, #tools, #toolbar) :is(button, .btn, a.btn, #btn-cambiar-turno) {
  /* Box model */
  height: 44px !important;
  min-height: 44px !important;
  padding: 0 14px !important;
  box-sizing: border-box !important;
  width: 100% !important;

  /* Texto */
  font-size: 14px !important;
  line-height: 1 !important;
  font-weight: 600 !important;
  letter-spacing: 0.2px !important;

  /* Visual */
  border-radius: 12px !important;
  border: 1px solid rgba(0,0,0,0.06) !important;
  background: rgba(255,255,255,0.92) !important;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04) !important;

  /* Layout interno */
  display: inline-flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  gap: 10px !important;
  white-space: nowrap !important;
  cursor: pointer !important;
  transition: transform .06s ease, box-shadow .12s ease, background .12s ease !important;
}

/* Hover / Active */
:is(.toolbar, .toolbar-vertical, #tools, #toolbar) :is(button, .btn, a.btn, #btn-cambiar-turno):hover {
  transform: translateY(-1px) !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08) !important;
}
:is(.toolbar, .toolbar-vertical, #tools, #toolbar) :is(button, .btn, a.btn, #btn-cambiar-turno):active {
  transform: translateY(0) scale(0.99) !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.06) !important;
}

/* Estado activo (toggle “colocado”) */
:is(.toolbar, .toolbar-vertical, #tools, #toolbar) :is(button.is-active, .btn.is-active)[aria-pressed="true"] {
  background: rgba(59,130,246,0.10) !important; /* azul suave */
  border-color: rgba(59,130,246,0.35) !important;
}

/* Íconos dentro de botones */
:is(.toolbar, .toolbar-vertical, #tools, #toolbar) :is(button, .btn, a.btn) .ico,
:is(.toolbar, .toolbar-vertical, #tools, #toolbar) :is(button, .btn, a.btn) > svg {
  width: 18px !important;
  height: 18px !important;
  flex: 0 0 auto !important;
  display: inline-block !important;
  transform: translateY(0.5px);
}

/* Selector de variante compacto */
.variant-select select {
  height: 44px !important;
  min-height: 44px !important;
  border-radius: 12px !important;
  font-size: 14px !important;
  padding: 0 12px !important;
  border: 1px solid rgba(0,0,0,0.12) !important;
}

/* Ajustes de tarjetas auxiliares (WAN/DEV) para que no “salten” */
.wan-card, .dev-card, .turn-card {
  border-radius: 14px !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.06) !important;
}

/* ——— iPad Pro 1024×1366 y tablets (900–1199px): refuerzo ——— */
@media (min-width: 900px) and (max-width: 1199.98px) {
  html, body { margin:0 !important; overflow-y:auto !important; }
  .editor-layout, .layout-editor {
    grid-template-columns: 1fr !important;
    grid-template-rows: auto auto auto !important;
    grid-template-areas:
      "turn"
      "board"
      "tools" !important;
  }
  #board { width: min(88vmin, 840px) !important; }
}
